package com.market.pos.tool.hideroom;import com.google.gson.Gson;import com.market.pos.pojo.AskQQMessage;import java.text.SimpleDateFormat;import java.util.Date;//"我要闭关"public class HideRoom {    public static String ask;    public static void hideRoom(String qqid){        AskQQMessage askQQMessage = new AskQQMessage();        askQQMessage.setAct("106");        askQQMessage.setQQID(qqid);        hideRoomService.selectHideRoom(qqid);        String start_time = hideRoomService.start_time;        String userid = hideRoomService.userid;        Date date = new Date();        long time_start = date.getTime();        if (userid == null){            //没有闭关过            //先在hideroom表中插入用户的userid            hideRoomService.insertHideRoom(qqid);            hideRoomService.updateHideRoom(qqid,"start_time", String.valueOf(time_start));            askQQMessage.setMsg("[CQ:at,qq=" + qqid + "] 闭关成功！" +                    "\n闭关时长为2小时，在此期间若是不被打扰，则闭关成功，得到三百点修为值。若是被人偷袭，则前功尽弃，失去五百点修为 ！");            ask = new Gson().toJson(askQQMessage);            hideRoomService.updateHideRoom(qqid,"is_ok","1");            hideRoomService.updateHideRoom(qqid,"is_hurt","0");        }else {            if (start_time == null){                hideRoomService.updateHideRoom(qqid,"start_time", String.valueOf(time_start));                askQQMessage.setMsg("[CQ:at,qq=" + qqid + "] 闭关成功！" +                        "\n闭关时长为2小时，在此期间若是不被打扰，则闭关成功，得到三百点修为值。若是被人偷袭，则前功尽弃，失去五百点修为 ！");                ask = new Gson().toJson(askQQMessage);                hideRoomService.updateHideRoom(qqid,"is_ok","1");            }            else {                long start_time_long = Long.valueOf(start_time);                SimpleDateFormat df = new SimpleDateFormat("HH:mm:ss");                String time = df.format(start_time_long);                askQQMessage.setMsg("[CQ:at,qq=" + qqid + "] 今天已经闭关过了！" +                        "\n少侠今日的闭关时间是 " + time + " !");                ask = new Gson().toJson(askQQMessage);                hideRoomService.updateHideRoom(qqid,"is_ok","1");                System.out.println(start_time_long);                System.out.println(start_time);            }        }    }}