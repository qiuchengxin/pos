package com.market.pos.tool.pk;import com.google.gson.Gson;import com.market.pos.pojo.AskQQMessage;public class TiaoZhan {    public static String ask ;    public static void tiaoZhan(String qqid,String groupid,String msg){        String ch_qqid = null;        GetQid.getQid(msg);        ch_qqid = GetQid.ch_qqid;        //创建返回对象        AskQQMessage askQQMessage = new AskQQMessage();        askQQMessage.setAct("101");        askQQMessage.setQQID(qqid);        askQQMessage.setGroupid(groupid);        //判断当前对象usertwo是否可挑战        GetGrade.getGrade(ch_qqid);        int usertwo_grade = GetGrade.grade;        //获取挑战者grade        GetGrade.getGrade(qqid);        int user_grade = GetGrade.grade;        //获取挑战者pkdaily        GetGrade.getPkdaily(qqid);        int user_pkdaily = GetGrade.pkdaily;        System.out.println("upk :"  + user_pkdaily);        //判定是否可挑战        if (user_grade == 0){            askQQMessage.setMsg("[CQ:at,qq=" +qqid+ "] 抱歉，你还没有修为，试试对我说签到吧 ！ ");            ask = new Gson().toJson(askQQMessage);        }        if (user_pkdaily == 1){            askQQMessage.setMsg("[CQ:at,qq=" +qqid+ "] 今天已经挑战过了，少侠请明日再来 ！");            ask = new Gson().toJson(askQQMessage);        }else{            //今天可以挑战            if (usertwo_grade < 150){                askQQMessage.setMsg("[CQ:at,qq=" +qqid+ "] 对方修为低于150，还是弟中弟中弟，无法挑战。。。");                ask = new Gson().toJson(askQQMessage);            }else if (user_grade > usertwo_grade){                //修为高于对方                //定义随机数，进入随机逻辑                int tz_num = (int)(Math.random()*100);                //80%概率普通攻击                if (tz_num < 80){                    int pt_hurt = tz_num + 50 ;                    int last_user_grade = user_grade + pt_hurt;                    int last_usertwo_grade = usertwo_grade - pt_hurt ;                    GetGrade.updateGrade(qqid , last_user_grade);                    GetGrade.updateGrade(ch_qqid,last_usertwo_grade);                    askQQMessage.setMsg("[CQ:at,qq=" +qqid+ "] 你一巴掌过去，把Ta打到墙上扣都扣不下来，并成功获取了对方 "+pt_hurt+" 点修为 !");                    ask = new Gson().toJson(askQQMessage);                }                //14%概率暴击                if (tz_num >= 80 && tz_num <94){                    int pt_hurt = tz_num + 300 ;                    int last_user_grade = user_grade + pt_hurt;                    int last_usertwo_grade = usertwo_grade - pt_hurt ;                    GetGrade.updateGrade(qqid , last_user_grade);                    GetGrade.updateGrade(ch_qqid,last_usertwo_grade);                    askQQMessage.setMsg("[CQ:at,qq=" +qqid+ "] 你一个回旋踢打出会心效果，成功暴击对方，并成功获取了对方 "+pt_hurt+" 点修为 !");                    ask = new Gson().toJson(askQQMessage);                }                //3%概率诡异事件                if (tz_num >=94 && tz_num < 97 ){                    //吸功大法                    int pt_hurt = tz_num + 200 ;                    int last_user_grade = user_grade - pt_hurt;                    int last_usertwo_grade = usertwo_grade + pt_hurt ;                    GetGrade.updateGrade(qqid , last_user_grade);                    GetGrade.updateGrade(ch_qqid,last_usertwo_grade);                    askQQMessage.setMsg("[CQ:at,qq=" +qqid+ "] 你正在运功却发现无法控制浑身流动的斗气！ 你抬起头突然看见" +                            "对方那邪魅的一笑，原来中了魔教的吸功大法！你最终被吸走 "+pt_hurt+" 点修为 ！");                    ask = new Gson().toJson(askQQMessage);                }                if (tz_num >= 97){                    //两败俱伤                    int pt_hurt = tz_num + 50 ;                    int last_user_grade = user_grade - pt_hurt;                    int last_usertwo_grade = usertwo_grade - pt_hurt ;                    GetGrade.updateGrade(qqid , last_user_grade);                    GetGrade.updateGrade(ch_qqid,last_usertwo_grade);                    askQQMessage.setMsg("[CQ:at,qq=" +qqid+ "] 少侠痴迷与人挑战，惊觉自己原来早已走火入魔，双方同时损失修为 "+pt_hurt+" 点修为 !");                    ask = new Gson().toJson(askQQMessage);                }            }else if (user_grade < usertwo_grade){                //修为低于对方                int tz_num = (int)(Math.random()*100);                if (tz_num <= 20){                    int pt_hurt = tz_num + 50 ;                    int last_user_grade = user_grade + pt_hurt;                    int last_usertwo_grade = usertwo_grade - pt_hurt ;                    GetGrade.updateGrade(qqid , last_user_grade);                    GetGrade.updateGrade(ch_qqid,last_usertwo_grade);                    askQQMessage.setMsg("[CQ:at,qq=" +qqid+ "] 你对着对方不断的打出 QAQ ，对方不耐烦施舍了  "+pt_hurt+" 点修为 !");                    ask = new Gson().toJson(askQQMessage);                }                if (tz_num > 20 && tz_num < 30){                    int pt_hurt = tz_num + 50 ;                    int last_user_grade = user_grade + pt_hurt;                    int last_usertwo_grade = usertwo_grade - pt_hurt ;                    GetGrade.updateGrade(qqid , last_user_grade);                    GetGrade.updateGrade(ch_qqid,last_usertwo_grade);                    askQQMessage.setMsg("[CQ:at,qq=" +qqid+ "] 恭喜你骚年，偷袭成功！  "+pt_hurt+" 点修为 !");                    ask = new Gson().toJson(askQQMessage);                }                if (tz_num >=30 && tz_num < 90){                    int pt_hurt = tz_num + 50 ;                    int last_user_grade = user_grade - pt_hurt;                    int last_usertwo_grade = usertwo_grade + pt_hurt ;                    GetGrade.updateGrade(qqid , last_user_grade);                    GetGrade.updateGrade(ch_qqid,last_usertwo_grade);                    askQQMessage.setMsg("[CQ:at,qq=" +qqid+ "] 因为修为不敌，你被对方一巴掌拍到墙上扣都扣不下来 "+pt_hurt+" 点修为 !");                    ask = new Gson().toJson(askQQMessage);                }                if (tz_num >= 90){                    int pt_hurt = tz_num + 100 ;                    int yylj = pt_hurt + 2000;                    int last_user_grade = user_grade + yylj;                    int last_usertwo_grade = usertwo_grade + pt_hurt ;                    GetGrade.updateGrade(qqid , last_user_grade);                    GetGrade.updateGrade(ch_qqid,last_usertwo_grade);                    askQQMessage.setMsg("[CQ:at,qq=" +qqid+ "] 你不小心被对方打死，意外之间，成功触发奇遇《阴阳两界》，" +                            "成功获得 "+yylj+" 点修为 !");                    ask = new Gson().toJson(askQQMessage);                }            }else if (user_grade == usertwo_grade){                //双方相等                int last_user_grade = user_grade + 1200;                int last_usertwo_grade = usertwo_grade + 1200;                GetGrade.updateGrade(qqid , last_user_grade);                GetGrade.updateGrade(ch_qqid,last_usertwo_grade);                askQQMessage.setMsg("[CQ:at,qq=" +qqid+ "] 双方修为相等，触发奇遇 《仗剑天涯》，各增加修为：2000点 ！");                ask = new Gson().toJson(askQQMessage);            }        }    }}